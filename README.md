# ç©ºé—´å¯¼èˆªä¸ç¥ç»åŒæ­¥å®éªŒç³»ç»Ÿ

**åŸºäºOptiTrackå’ŒLSLçš„å¤šæ¨¡æ€å®éªŒå¹³å°**

[![Version](https://img.shields.io/badge/version-3.3.1-blue.svg)](https://github.com)
[![Python](https://img.shields.io/badge/python-3.8+-green.svg)](https://python.org)
[![License](https://img.shields.io/badge/license-MIT-orange.svg)](LICENSE)

---

## ğŸ¯ ç³»ç»Ÿç®€ä»‹

æœ¬ç³»ç»Ÿç”¨äºç ”ç©¶äºŒäººåä½œç©ºé—´å¯¼èˆªä»»åŠ¡ä¸­çš„è¡Œä¸ºå’Œç¥ç»åŒæ­¥ç°è±¡ï¼Œé›†æˆäº†OptiTrackåŠ¨ä½œæ•æ‰å’ŒLSLæ•°æ®æµæŠ€æœ¯ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- âœ… **å®æ—¶ä½ç½®è·Ÿè¸ª**ï¼šOptiTrack ~120 Hzé«˜ç²¾åº¦å®šä½
- âœ… **å®æ—¶å¯è§†åŒ–**ï¼šPsychoPy 30 FPSæµç•…æ˜¾ç¤º
- âœ… **LSLæ•°æ®æµ**ï¼š3è·¯å¹¿æ’­ï¼ˆMarker + 2ä½ç½®æµï¼‰
- âœ… **å¤šæ¨¡æ€åŒæ­¥**ï¼šLSLç»Ÿä¸€æ—¶é’Ÿï¼Œå¾®ç§’çº§ç²¾åº¦
- âœ… **æ•°æ®å¯é æ€§**ï¼š4å±‚ä¿æŠ¤ï¼Œ99.9%ä¸ä¸¢å¤±
- âœ… **å®Œæ•´è®°å½•**ï¼šBehavior/Position/Markers/OptiTrack CSV

---

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶

1. **ç¡¬ä»¶**ï¼šOptiTrackåŠ¨ä½œæ•æ‰ç³»ç»Ÿ
2. **è½¯ä»¶**ï¼šMotiveè½¯ä»¶ï¼ˆæ­£åœ¨è¿è¡Œï¼‰
3. **Python**ï¼š3.8+ï¼Œå·²å®‰è£…ä¾èµ–

### 1. é…ç½®Motive

**Assetsé¢æ¿**ï¼š
- åˆ›å»º2ä¸ª**Markerset**ï¼ˆä¸æ˜¯Skeletonï¼‰
- å‘½åä¸º"Sub001"å’Œ"Sub002"
- ç¡®ä¿ä¸ºç»¿è‰²ï¼ˆæ­£åœ¨è·Ÿè¸ªï¼‰

**æµè®¾ç½®**ï¼ˆç¼–è¾‘ > è®¾ç½® > æµè®¾ç½®ï¼‰ï¼š
- âœ… Broadcast Frame Data
- âœ… Marker Set
- âœ… Labeled Markers

**å¼€å§‹å½•åˆ¶**ï¼ˆåº•éƒ¨çº¢è‰²æŒ‰é’®ï¼‰

### 2. å¯åŠ¨ç³»ç»Ÿ

```bash
# å…‹éš†æˆ–è¿›å…¥é¡¹ç›®ç›®å½•
cd D:\æ¡Œé¢\Navigation

# å¯åŠ¨å®éªŒ
python run_experiment.py
```

**å°±è¿™ä¹ˆç®€å•ï¼** ğŸ‰

### 3. ï¼ˆå¯é€‰ï¼‰å¯åŠ¨LSLå½•åˆ¶å™¨

```bash
# æ–°ç»ˆç«¯
python Scripts\Tools\lsl_recorder.py --gui
```

ç‚¹å‡»"å¼€å§‹å½•åˆ¶"ï¼Œå½•åˆ¶OptiTrackä½ç½®æµã€‚

---

## ğŸ“– å®Œæ•´æ–‡æ¡£

### æŠ€æœ¯æ–‡æ¡£ï¼ˆ6ç« è¯¦ç»†æ‰‹å†Œï¼‰

**å…¥å£**ï¼š[æŠ€æœ¯æ–‡æ¡£-ä¸»æ–‡æ¡£.md](docs/Main.md)

1. **[ç¬¬1ç«  é¡¹ç›®æ¶æ„](docs/01Chapter_ProjectFrame.md)** - æ¨¡å—è¯¦è§£ã€ä¾èµ–å…³ç³»
2. **[ç¬¬2ç«  NatNetç³»ç»Ÿ](docs/02Chapter_NatnetSdk.md)** â­ - æ•°æ®é‡‡é›†æŠ€æœ¯
3. **[ç¬¬3ç«  LSLç³»ç»Ÿ](docs/03Chapter_LabStreamingLayor.md)** â­ - æ•°æ®æµæŠ€æœ¯
4. **[ç¬¬4ç«  é…ç½®å‚æ•°](docs/04Chapter_Config.md)** - å‚æ•°æ‰‹å†Œ
5. **[ç¬¬5ç«  æ•°æ®æ ¼å¼](docs/05Chapter_DataFormat.md)** - æ ¼å¼è§„èŒƒ
6. **[ç¬¬6ç«  æ•…éšœè¯Šæ–­](docs/06Chapter_Problem.md)** - é—®é¢˜è§£å†³

### å…¶ä»–æ–‡æ¡£

- **æ¡†æ¶æ–‡æ¡£**ï¼š[framework.md](docs/framework.md)
- **ç ”ç©¶è®¾è®¡**ï¼š[research_design.md](docs/research_design.md)
- **ç‰ˆæœ¬æ›´æ–°**ï¼š[docs/Change/](docs/Change/)

---

## ğŸ“ å¸¸è§é—®é¢˜é€ŸæŸ¥

| é—®é¢˜ | å¿«é€Ÿè§£å†³ | è¯¦ç»†è¯´æ˜ |
|------|---------|---------|
| **å…‰ç‚¹ä¸ç§»åŠ¨** | Sub001æ”¹ä¸ºMarkerset | [ç¬¬6ç«  6.1](docs/06Chapter_Problem.md) |
| **è°ƒæ•´ç¼©æ”¾** | ä¿®æ”¹`experiment_config.json`ç¬¬6è¡Œ | [ç¬¬4ç«  4.1](docs/04Chapter_Config.md) |
| **LSLæ— æ•°æ®** | å…ˆå¯åŠ¨å½•åˆ¶å™¨ï¼Œå†å¯åŠ¨å®éªŒ | [ç¬¬6ç«  6.2](docs/06Chapter_Problem.md) |
| **NatNetè¿æ¥å¤±è´¥** | æ£€æŸ¥IPå’ŒMotiveå½•åˆ¶çŠ¶æ€ | [ç¬¬2ç«  2.8](docs/02Chapter_NatnetSdk.md) |

---

## ğŸ“Š æ•°æ®è¾“å‡º

### å•æ¬¡å®éªŒï¼ˆ15åˆ†é’Ÿï¼‰ç”Ÿæˆçš„æ–‡ä»¶

```
Data/
â”œâ”€â”€ Behavior/D001/            # è¡Œä¸ºæ•°æ®
â”‚   â”œâ”€â”€ Behavior.csv (20 trials)
â”‚   â”œâ”€â”€ Position.csv (~108,000å¸§)
â”‚   â””â”€â”€ Markers.csv (~100äº‹ä»¶)
â”‚
â”œâ”€â”€ OptiTrack/D001/           # åŸå§‹OptiTrackæ•°æ®
â”‚   â””â”€â”€ *.csv (~108,000å¸§)
â”‚
â””â”€â”€ LSL/20251017/             # LSLæµå½•åˆ¶
    â”œâ”€â”€ Sub001_Position.csv (~108,000å¸§)
    â””â”€â”€ Sub002_Position.csv (~108,000å¸§)
```

**æ€»é‡**ï¼šçº¦30-35 MB

---

## ğŸ”§ æ ¸å¿ƒé…ç½®

### å¿…æ”¹å‚æ•°

**æ–‡ä»¶**ï¼š`Config/experiment_config.json`

```json
{
  "transform_params": {
    "scale_factor": 180.0,  â† æ ¹æ®æˆ¿é—´å¤§å°è°ƒæ•´ï¼ˆ150-250ï¼‰
  },
  
  "natnet_config": {
    "server_ip": "192.168.3.58",  â† Motiveç”µè„‘IP
    "client_ip": "192.168.3.55"   â† Pythonç”µè„‘IP
  },
  
  "audio_config": {
    "interval_after_target_found": 2.0  â† éŸ³é¢‘é—´éš”ï¼ˆ1-5ç§’ï¼‰
  }
}
```

### ç¼©æ”¾å› å­é€ŸæŸ¥è¡¨

| æˆ¿é—´å¤§å° | æ¨èscale_factor |
|---------|-----------------|
| 4m Ã— 4m | 270 |
| 5m Ã— 5m | 216 |
| **6m Ã— 6m** | **180**ï¼ˆé»˜è®¤ï¼‰ |
| 8m Ã— 8m | 135 |

---

## ğŸ› ï¸ æµ‹è¯•å·¥å…·

```bash
# NatNetè¿æ¥æµ‹è¯•
python Scripts\Tools\test_natnet_to_psychopy.py

# LSLæµæµ‹è¯•
python Scripts\Tools\test_optitrack_lsl_streams.py

# å®Œæ•´è¯Šæ–­
python Scripts\Tools\test_lsl_connection.py
```

---

## ğŸ“ˆ ç³»ç»Ÿæ€§èƒ½

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| PsychoPyå¸§ç‡ | 30 FPS |
| NatNetå¸§ç‡ | ~120 Hz |
| ä½ç½®å»¶è¿Ÿ | <50 ms |
| CPUå ç”¨ | 30-40% |
| æ•°æ®å¯é æ€§ | 99.9% |

---

## ğŸŠ V3.3.1 æ–°ç‰¹æ€§

- âœ… **OptiTrackâ†’LSLä½ç½®æµå¹¿æ’­**ï¼ˆæ”¯æŒfNIRS/EEGåŒæ­¥ï¼‰
- âœ… **LSLè‡ªåŠ¨ä¿å­˜**ï¼ˆæ¯30ç§’ï¼ŒESCä¸ä¸¢æ•°æ®ï¼‰
- âœ… **Behaviorå­—æ®µå®Œæ•´**ï¼ˆæ‰€æœ‰æ—¶é—´æˆ³æ­£ç¡®è®°å½•ï¼‰
- âœ… **æ—¶é—´æˆ³ç»Ÿä¸€**ï¼ˆLSLæ—¶é’Ÿï¼Œå¾®ç§’åŒæ­¥ï¼‰
- âœ… **GUIä¼˜åŒ–**ï¼ˆ1200Ã—800å¤§çª—å£ï¼‰
- âœ… **æ™ºèƒ½é»˜è®¤**ï¼ˆåªå½•åˆ¶ä½ç½®æµï¼‰

---

## ğŸ“ è·å–å¸®åŠ©

### æ–‡æ¡£

- **å¿«é€Ÿé—®é¢˜**ï¼š[ç¬¬6ç«  æ•…éšœè¯Šæ–­](docs/06Chapter_Problem.md)
- **æŠ€æœ¯ç»†èŠ‚**ï¼š[ç¬¬2ç«  NatNet](docs/02Chapter_NatnetSdk.md) + [ç¬¬3ç«  LSL](docs/03Chapter_LabStreamingLayor.md)
- **å‚æ•°è°ƒæ•´**ï¼š[ç¬¬4ç«  é…ç½®å‚æ•°](docs/04Chapter_Config.md)

### è¯Šæ–­å·¥å…·

è¿è¡Œç›¸åº”å·¥å…·è·å–è¯¦ç»†è¯Šæ–­ä¿¡æ¯ï¼ŒæŸ¥é˜…æ–‡æ¡£è§£å†³ã€‚

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ† ç³»ç»ŸçŠ¶æ€

**Version**: V3.3.1 Final  
**Status**: âœ… Production Ready  
**Reliability**: 99.9%  
**Documentation**: Complete

**å‡†å¤‡æŠ•å…¥ä½¿ç”¨ï¼** ğŸš€

---

**ç»´æŠ¤è€…**: Research Team  
**æœ€åæ›´æ–°**: 2025-10-17  
**æŠ€æœ¯æ”¯æŒ**: æŸ¥é˜…å®Œæ•´æŠ€æœ¯æ–‡æ¡£

